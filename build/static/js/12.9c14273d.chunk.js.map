{"version":3,"sources":["pages/Register.js"],"names":["Wrapper","styled","div","Title","h1","layout","labelCol","span","wrapperCol","tailLayout","offset","Component","history","useHistory","AuthStore","useStores","Validators","username","rule","value","console","log","test","Promise","reject","length","resolve","name","onFinish","values","setUsername","setPassword","password","register","then","push","catch","onFinishFailed","errorInfo","Item","label","rules","required","message","validator","min","max","Password","getFieldValue","type","htmlType"],"mappings":"ifAMA,IAAMA,EAAUC,IAAOC,IAAV,KAOPC,EAAQF,IAAOG,GAAV,KAILC,EAAS,CACbC,SAAU,CAACC,KAAM,GACjBC,WAAY,CAACD,KAAM,KAEfE,EAAa,CACjBD,WAAY,CAACE,OAAQ,EAAGH,KAAM,KAyFjBI,UAtFG,WAChB,IAAMC,EAAUC,cACTC,EAAaC,cAAbD,UAmBDE,EAAa,CACjBC,SADiB,SACRC,EAAKC,GAEZ,OADAC,QAAQC,IAAIH,EAAKC,OACb,KAAKG,KAAKH,GAAeI,QAAQC,OAAO,8FACxCL,EAAMM,OAAO,GAAKN,EAAMM,OAAQ,GAAWF,QAAQC,OAAO,4CACvDD,QAAQG,YAanB,OACE,kBAAC1B,EAAD,KACE,kBAACG,EAAD,qBACA,kBAAC,IAAD,iBACME,EADN,CAEEsB,KAAK,QACLC,SA1CW,SAAAC,GACfT,QAAQC,IAAI,WAAYQ,GACxBf,EAAUgB,YAAYD,EAAOZ,UAC7BH,EAAUiB,YAAYF,EAAOG,UAC7BlB,EAAUmB,WACPC,MAAK,WACJd,QAAQC,IAAI,gEACZT,EAAQuB,KAAK,QAEdC,OAAM,WACLhB,QAAQC,IAAI,gCAiCZgB,eA7BiB,SAAAC,GACrBlB,QAAQC,IAAI,UAAWiB,MA8BnB,kBAAC,IAAKC,KAAN,CACEC,MAAM,qBACNb,KAAK,WACLc,MAAO,CAAC,CAACC,UAAU,EAAMC,QAAS,kCAAS,CAACC,UAAU5B,EAAWC,YAEjE,kBAAC,IAAD,OAGF,kBAAC,IAAKsB,KAAN,CACEC,MAAM,2BACNb,KAAK,WACLc,MAAO,CACL,CAACC,UAAU,EAAMC,QAAS,4BAC1B,CAACE,IAAI,EAAEF,QAAQ,mCACf,CAACG,IAAI,GAAGH,QAAQ,sCAIlB,kBAAC,IAAMI,SAAP,OAEF,kBAAC,IAAKR,KAAN,CACEC,MAAM,2BACNb,KAAK,kBACLc,MAAO,CAAC,CAACC,UAAU,EAAMC,QAAS,wCAzClB,SAAC,GAAD,IAAEK,EAAF,EAAEA,cAAF,MAAoB,CAC1CJ,UAD0C,SAChC1B,EAAKC,GACb,OAAKA,GAAS6B,EAAc,cAAgB7B,EAGrCI,QAAQC,OAAO,8CAFbD,QAAQG,eAwCb,kBAAC,IAAMqB,SAAP,OAIF,kBAAC,IAAKR,KAAS9B,EACb,kBAAC,IAAD,CAAQwC,KAAK,UAAUC,SAAS,UAAhC","file":"static/js/12.9c14273d.chunk.js","sourcesContent":["import {Form, Input, Button} from 'antd';\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport {useStores} from \"../stores\";\nimport {useHistory} from 'react-router-dom'\n\nconst Wrapper = styled.div`\nmax-width:600px;\nmargin:30px auto;\nbox-shadow: 2px 2px 4px 0 rgba(0,0,0,0.2);\nborder-radius:4px;\npadding:20px;\n`\nconst Title = styled.h1`\ntext-align:center;\nmargin-bottom:30px;\n`\nconst layout = {\n  labelCol: {span: 4},\n  wrapperCol: {span: 20},\n};\nconst tailLayout = {\n  wrapperCol: {offset: 4, span: 20},\n};\n\nconst Component = () => {\n  const history = useHistory()\n  const {AuthStore} = useStores()\n  const onFinish = values => {\n    console.log('Success:', values);\n    AuthStore.setUsername(values.username)\n    AuthStore.setPassword(values.password)\n    AuthStore.register()\n      .then(()=>{\n        console.log('注册成功，跳转到首页')\n        history.push('/')\n      })\n      .catch(()=>{\n        console.log('注册失败')\n      })\n  };\n\n  const onFinishFailed = errorInfo => {\n    console.log('Failed:', errorInfo);\n  };\n\n  const Validators = {\n    username(rule,value){\n      console.log(rule.value)\n      if (/\\W/.test(value)) return Promise.reject('不能出现字母数字下划线以外字符');\n      if (value.length<4 || value.length >10) return Promise.reject('长度为4~10个字符');\n     return  Promise.resolve();\n    }\n  }\n  //判断其他是否和我相等\n  const confirmPassword = ({getFieldValue})=>({\n    validator(rule,value){\n      if (!value || getFieldValue('password') === value){\n        return Promise.resolve()\n      }\n      return Promise.reject('两次密码不一致')\n    }\n  })\n\n  return (\n    <Wrapper>\n      <Title>注册</Title>\n      <Form\n        {...layout}\n        name=\"basic\"\n        onFinish={onFinish}\n        onFinishFailed={onFinishFailed}\n      >\n        <Form.Item\n          label=\"用户名\"\n          name=\"username\"\n          rules={[{required: true, message: '输入用户名'},{validator:Validators.username}]}\n        >\n          <Input/>\n        </Form.Item>\n\n        <Form.Item\n          label=\"输入密码\"\n          name=\"password\"\n          rules={[\n            {required: true, message: '输入密码'},\n            {min:4,message:'最少4个字符'},\n            {max:16,message:'最多16个字符'}\n\n            ]}\n        >\n          <Input.Password/>\n        </Form.Item>\n        <Form.Item\n          label=\"确认密码\"\n          name=\"confirmPassword\"\n          rules={[{required: true, message: '再次确认密码'},confirmPassword]}\n        >\n          <Input.Password/>\n        </Form.Item>\n\n\n        <Form.Item {...tailLayout}>\n          <Button type=\"primary\" htmlType=\"submit\">\n            提交\n          </Button>\n        </Form.Item>\n      </Form>\n    </Wrapper>\n  );\n};\nexport default Component\n\n"],"sourceRoot":""}